<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Verbes â€” Pratique adaptative (10â€“11 ans)</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="app-header">
      <h1>Verbes</h1>
      <div class="user-box">
        <label>PrÃ©nom</label>
        <input id="userName" type="text" placeholder="Ton prÃ©nom" />
        <button id="saveUser" class="btn">OK</button>
      </div>
    </header>

    <main class="container">
      <nav class="tabs" role="tablist" aria-label="Sections">
        <button class="tab active" id="tab-dashboard" data-tab="dashboard" role="tab" aria-controls="dashboard">Tableau de bord</button>
        <button class="tab" id="tab-quiz" data-tab="quiz" role="tab" aria-controls="quiz">Quiz adaptatif</button>
        <button class="tab" id="tab-libre" data-tab="libre" role="tab" aria-controls="libre">Mode libre</button>
        <button class="tab" id="tab-rapport" data-tab="rapport" role="tab" aria-controls="rapport">Rapport</button>
        <button class="tab" id="tab-reglages" data-tab="reglages" role="tab" aria-controls="reglages">RÃ©glages</button>
        <button class="tab" id="tab-aide" data-tab="aide" role="tab" aria-controls="aide">Ã€ propos / Aide</button>
      </nav>

      <section id="dashboard" class="tab-panel active" role="tabpanel" aria-labelledby="tab-dashboard">
        <div class="cards">
          <div class="card">
            <h2>Ã€ rÃ©viser aujourdâ€™hui</h2>
            <p id="dueCount">â€”</p>
            <p class="subtext">BasÃ© sur tes erreurs rÃ©centes et la rÃ©vision espacÃ©e.</p>
            <div id="dueList"></div>
          </div>
          <div class="card">
            <h2>DerniÃ¨re session</h2>
            <p id="lastScore">â€”</p>
            <div id="lastErrors"></div>
          </div>
          <div class="card">
            <h2>Badges</h2>
            <ul id="badges" class="badges">
              <!-- dynamisÃ© -->
            </ul>
          </div>
        </div>
      </section>

      <section id="quiz" class="tab-panel" role="tabpanel" aria-labelledby="tab-quiz">
        <div class="panel">
          <div class="row">
            <div class="grow">
              <h2>Quiz (10 questions)</h2>
              <p class="sub">Questions tirÃ©es selon tes besoins (adaptatif).</p>
            </div>
            <div>
              <button id="startQuiz" class="btn primary">DÃ©marrer</button>
            </div>
          </div>

          <div id="quizBox" class="quiz-box hidden">
            <div class="question">
              <div id="qProgress" class="progress"></div>
              <div class="qline">
                <span id="qSujet" class="pill"></span>
                <span id="qVerbe" class="pill"></span>
                <span id="qTemps" class="pill"></span>
              </div>
              <label for="qInput">Ta rÃ©ponse :</label>
              <div class="answer-row">
                <span id="qSujetLeft" class="subject-left"></span>
                <input id="qInput" type="text" autocomplete="off" placeholder="verbe" />
                <button id="qSubmit" class="btn primary">Valider</button>
              </div>
              <button id="qNext" class="btn" style="display: none">Jâ€™ai compris / Suivant</button>
              <div id="qFeedback" class="feedback" role="status" aria-live="polite"></div>
            </div>
          </div>
        </div>
      </section>

      <section id="libre" class="tab-panel" role="tabpanel" aria-labelledby="tab-libre">
        <div class="panel">
          <h2>Mode libre</h2>
          <div class="row wrap gap">
            <div>
              <label>Verbe</label>
              <select id="libreVerbe"></select>
            </div>
            <div>
              <label>Temps</label>
              <select id="libreTemps"></select>
            </div>
            <div class="row align-end">
              <button id="libreLoad" class="btn">Charger</button>
            </div>
          </div>

          <div id="libreGrid" class="grid-2 hidden">
            <div>
              <h3>Tu Ã©cris</h3>
              <div class="table-like">
                <div class="row"><span>je / jâ€™</span><input data-p="1s" /></div>
                <div class="row"><span>tu</span><input data-p="2s" /></div>
                <div class="row"><span>il/elle</span><input data-p="3s" /></div>
                <div class="row"><span>nous</span><input data-p="1p" /></div>
                <div class="row"><span>vous</span><input data-p="2p" /></div>
                <div class="row"><span>ils/elles</span><input data-p="3p" /></div>
              </div>
              <button id="libreCheck" class="btn primary">VÃ©rifier</button>
              <div id="libreFeedback" class="feedback" role="status" aria-live="polite"></div>
            </div>
            <div>
              <h3>Correction</h3>
              <div id="libreCorrection" class="table-like"></div>
            </div>
          </div>
        </div>
      </section>

      <section id="rapport" class="tab-panel" role="tabpanel" aria-labelledby="tab-rapport">
        <div class="panel">
          <h2>Rapport</h2>

          <div class="cards kpi-cards">
            <div class="card kpi">
              <div class="kpi-label">Taux de rÃ©ussite</div>
              <div class="kpi-value" id="rGlobalRate">â€”</div>
              <div class="kpi-sub" id="rGlobalAttempts">â€”</div>
            </div>
            <div class="card kpi">
              <div class="kpi-label">Cartes maÃ®trisÃ©es</div>
              <div class="kpi-value ok" id="rMasteredCount">â€”</div>
              <div class="kpi-sub" id="rMasteredHint">â€”</div>
            </div>
            <div class="card kpi">
              <div class="kpi-label">Cartes faibles</div>
              <div class="kpi-value warn" id="rWeakCount">â€”</div>
              <div class="kpi-sub" id="rWeakHint">â€”</div>
            </div>
            <div class="card kpi">
              <div class="kpi-label">RÃ©visions dues aujourdâ€™hui</div>
              <div class="kpi-value" id="rDueToday">â€”</div>
              <div class="kpi-sub">cartes Ã  revoir</div>
            </div>
          </div>

          <div class="row wrap gap">
            <div class="card flex1">
              <h3>Faiblesses (Top 10)</h3>
              <div id="rWeak" class="list-rows"></div>
            </div>
            <div class="card flex1">
              <h3>MaÃ®trisÃ©s (Top 10)</h3>
              <div id="rMastered" class="list-rows"></div>
            </div>
          </div>

          <div class="card">
            <h3>Vue dâ€™ensemble par verbe</h3>
            <div id="rOverview" class="list-rows"></div>
          </div>
        </div>
        <div class="card">
          <h3>DÃ©tail par carte</h3>
          <div class="row gap" style="margin-bottom: 10px">
            <label class="row gap" style="font-size: 12px; color: var(--muted)">
              <input type="checkbox" id="rDetailsAll" />
              Afficher aussi les cartes sans essais
            </label>
          </div>

          <!-- En-tÃªte -->
          <div class="row-detail" style="opacity: 0.7; font-size: 12px">
            <div>Carte (verbe â€” temps â€” personne)</div>
            <div>SuccÃ¨s</div>
            <div>Ã‰checs</div>
            <div>Total</div>
            <div>Progression</div>
            <div>Taux</div>
          </div>

          <div id="rDetails" class="list-rows" style="margin-top: 8px"></div>
        </div>
      </section>

      <section id="reglages" class="tab-panel" role="tabpanel" aria-labelledby="tab-reglages">
        <div class="panel">
          <h2>RÃ©glages</h2>
          <div class="row gap" style="align-items: center; margin-bottom: 8px">
            <label for="presetSelect" style="min-width: 140px">PrÃ©configuration :</label>
            <select id="presetSelect">
              <!-- options injectÃ©es par app.js -->
            </select>
            <span style="font-size: 12px; color: var(--muted)">
              (AperÃ§u uniquement â€” cliquer <b>Enregistrer</b> pour appliquer)
            </span>
          </div>

          <div class="col">
            <div class="row wrap gap">
              <label>Verbes actifs</label>
              <div id="verbsChecks" class="checks"></div>
            </div>
            <br />
            <div class="row wrap gap">
              <label>Temps actifs</label>
              <div id="tensesChecks" class="checks"></div>
            </div>
            <div class="row wrap gap">
              <label>Questions par session</label>
              <input id="qCount" type="number" min="5" max="20" value="10" />
            </div>
          </div>
          <br />
          <div class="row gap">
            <button id="saveSettings" class="btn primary">Enregistrer</button>
            <button id="resetProgress" class="btn danger">RÃ©initialiser la progression</button>
          </div>
        </div>
      </section>

      <section id="aide" class="tab-panel" role="tabpanel" aria-labelledby="tab-aide">
        <div class="panel help">
          <h2>Guide de lâ€™application</h2>
          <p class="sub">Pour les enfants (10â€“11 ans) et les adultes qui suivent la progression.</p>

          <div class="cards">
            <div class="card">
              <h3>ğŸ¬ DÃ©marrage rapide</h3>
              <ol class="help-steps">
                <li>Entrer un <b>PrÃ©nom</b> en haut (crÃ©e/charge un profil sÃ©parÃ©).</li>
                <li>Aller dans <b>RÃ©glages</b> et cocher les <b>verbes/temps</b> Ã  pratiquer.</li>
                <li>Lancer un <b>Quiz adaptatif</b> (10 questions par dÃ©faut).</li>
              </ol>
            </div>

            <div class="card">
              <h3>ğŸ§  Comment Ã§a marche</h3>
              <p>
                Lâ€™application repÃ¨re les cartes <i>(verbe Ã— temps Ã— personne)</i> difficiles et les
                re-propose plus souvent (rÃ©vision espacÃ©e). Chaque rÃ©ponse met Ã  jour une note de
                facilitÃ©, un intervalle et une date â€œÃ  revoirâ€.
              </p>
            </div>
          </div>

          <details open>
            <summary>ğŸ¯ Quiz adaptatif</summary>
            <ul>
              <li>Tape la forme complÃ¨te <b>sujet + verbe</b> (ex. <i>nous sommes</i>).</li>
              <li>
                Si erreur, la correction reste affichÃ©e jusquâ€™au clic
                <b>â€œJâ€™ai compris / Suivantâ€</b>.
              </li>
              <li>
                Les questions proviennent surtout des cartes <b>â€œÃ  revoir aujourdâ€™huiâ€</b> + un peu
                de cartes faibles.
              </li>
              <li>Score et erreurs sont enregistrÃ©s dans le profil du prÃ©nom.</li>
            </ul>
            <p class="hint">
              Astuce: pour <b>jâ€™</b>, <u>pas dâ€™espace</u> (<i>jâ€™avais</i>). Lâ€™app tolÃ¨re aussi
              <i>j avais</i>.
            </p>
          </details>

          <details>
            <summary>âœï¸ Mode libre</summary>
            <ul>
              <li>Choisis <b>verbe</b> et <b>temps</b> (listes filtrÃ©es par tes RÃ©glages).</li>
              <li>
                Lâ€™enfant nâ€™Ã©crit que <b>le verbe conjuguÃ©</b> (les sujets sont dÃ©jÃ  affichÃ©s Ã 
                gauche).
              </li>
              <li>La correction montre <b>sujet + verbe</b> pour lâ€™apprentissage.</li>
              <li>Ces rÃ©ponses alimentent <b>la progression</b> comme le Quiz.</li>
            </ul>
          </details>

          <details>
            <summary>ğŸ“Š Rapport</summary>
            <ul>
              <li>
                <b>Stats globales :</b> taux de rÃ©ussite, cartes maÃ®trisÃ©es/faibles, rÃ©visions dues.
              </li>
              <li><b>Top 10 faiblesses</b> et <b>Top 10 maÃ®trisÃ©s</b> avec barres couleur.</li>
              <li><b>Vue dâ€™ensemble par verbe</b> (du plus faible au plus fort).</li>
              <li>
                <b>DÃ©tail par carte</b> : succÃ¨s/Ã©checs/total/taux pour chaque verbe-temps-personne.
                <br /><span class="hint"
                  >Option : â€œAfficher aussi les cartes sans essaisâ€ pour vÃ©rifier que tout
                  fonctionne.</span
                >
              </li>
            </ul>
          </details>

          <details>
            <summary>ğŸ› ï¸ RÃ©glages</summary>
            <ul>
              <li>
                Coche les <b>verbes</b> et <b>temps</b> actifs : ils alimentent le Quiz et le Mode
                libre.
              </li>
              <li><b>Questions par session</b> (5â€“20).</li>
              <li><b>RÃ©initialiser la progression</b> : efface les stats du profil en cours.</li>
            </ul>
          </details>

          <details>
            <summary>ğŸ‘¤ Profils (PrÃ©nom)</summary>
            <ul>
              <li>
                Chaque <b>prÃ©nom</b> charge un <b>profil</b> sÃ©parÃ© (rÃ©glages, progression, badges,
                sÃ©rie).
              </li>
              <li>Changer de prÃ©nom bascule instantanÃ©ment le tableau de bord et le rapport.</li>
            </ul>
          </details>

          <details>
            <summary>ğŸ… Badges</summary>
            <ul>
              <li><b>ğŸ¯ 10/10</b> : une session parfaite.</li>
              <li><b>ğŸ“† SÃ©rie 3 jours</b> : au moins une session 3 jours dâ€™affilÃ©e.</li>
              <li>
                <b>âš¡ RÃ©vision Ã  lâ€™heure</b> : lancer une session alors quâ€™il y a des cartes dues et
                la terminer.
              </li>
            </ul>
          </details>

          <details>
            <summary>ğŸ”’ DonnÃ©es & confidentialitÃ©</summary>
            <ul>
              <li>
                Toutes les donnÃ©es sont stockÃ©es <b>en local</b> dans ton navigateur
                (<i>localStorage</i>).
              </li>
              <li>Pas de compte, pas dâ€™envoi vers un serveur.</li>
              <li>
                Pour repartir Ã  zÃ©ro : <b>RÃ©initialiser la progression</b> (dans RÃ©glages) ou vider
                le stockage du site.
              </li>
            </ul>
          </details>

          <details>
            <summary>ğŸ’¡ Astuces</summary>
            <ul>
              <li>Dans le Quiz, touche <span class="kbd">EntrÃ©e</span> pour valider.</li>
              <li>
                Le Mode libre accepte seulement le <b>verbe</b> (pas besoin dâ€™Ã©crire le sujet).
              </li>
              <li>
                Couleurs des barres : <span style="color: #f87171">rouge</span> &lt; 60%,
                <span style="color: #fbbf24">orange</span> &lt; 80%,
                <span style="color: #22c55e">vert</span> â‰¥ 80%.
              </li>
            </ul>
          </details>
        </div>
      </section>
    </main>

    <footer class="app-footer">
      <small>Â© 2025 Verbes (POC Ã©ducatif) â€” DonnÃ©es locales uniquement</small>
    </footer>

    <script src="app.js"></script>
  </body>
</html>
